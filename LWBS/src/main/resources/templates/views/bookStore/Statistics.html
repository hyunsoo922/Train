<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>전체 교재 구매 통계</title>


    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        h1 {
            text-align: center;
        }

        canvas {
            display: block;
            margin: auto;
        }
    </style>
</head>
<body>
<th:block th:insert="~{/header::header}"></th:block>
<th:block th:insert="~{/storenav::navfrag}"></th:block>
<h1>전체 교재 구매 통계</h1>

<!-- 파이 차트를 그릴 캔버스 요소 추가 -->
<canvas id="myPieChart" width="400" height="400"></canvas>

<!-- 각 학과별로 교재 판매량을 수집하는 스크립트 -->
<script th:inline="javascript">
    var departmentSales = [];


    <th:block th:each="book, iterStat : ${bookList}">
        var department = /* Thymeleaf 표현식을 사용하여 학과명을 가져옴 */;
        var sales = /* Thymeleaf 표현식을 사용하여 판매량을 가져옴 */;

        departmentSales.push({
            department: department,
            sales: sales
        });
    </th:block>
</script>

<!-- 파이 차트 생성 스크립트 -->
<script>

    var ctx = document.getElementById('myPieChart').getContext('2d');
    var myPieChart = new Chart(ctx, {
        type: 'pie',
        data: {
            labels: departmentSales.map(item => item.department),
            datasets: [{
                data: departmentSales.map(item => item.sales),
                backgroundColor: [
                    '#FF6384',
                    '#36A2EB',
                    '#FFCE56',
                    // 추가 색상도 필요에 따라 더 추가 가능
                ],
            }]
        },
    });
</script>
</body>
</html>

